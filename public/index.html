<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
		<title>Zenith</title>

		<link rel="icon" type="image/png" href="Zenith.png" />
	
		<script src="/scram/scramjet.all.js"></script>
		<script src="/baremux/index.js"></script>
		
		<link rel="stylesheet" href="index.css" />
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="index.js" defer></script>
	</head>

	<body>
		<nav class="navbar">
			<div class="nav-left" onclick="location.reload()">
				<img src="Zenith.png" class="nav-logo" alt="Zenith" />
				<span class="nav-title">ZENITH</span>
			</div>
			
			<div class="nav-center">
				<form id="nav-search-form" onsubmit="event.preventDefault(); navSearch();">
					<input id="nav-address" type="text" placeholder="Re-search..." class="nav-input" />
				</form>
			</div>

			<div class="nav-right">
				<button onclick="location.reload()" class="nav-btn">üè† HOME</button>
				<button class="nav-btn">‚å®Ô∏è COMMANDS</button>
				<button class="nav-btn">‚öôÔ∏è SETTINGS</button>
			</div>
		</nav>

		<div id="content-area">
			<div title="Scramjet Logo" class="flex-center logo-wrapper header-center">
				<img class="logo" src="Zenith.png" alt="Zenith" />
				<h1>Zenith | AC</h1>
			</div>
			<div class="flex-center desc left-margin">
				<p>
					Scramjet is an experimental interception based web proxy designed to
					evade internet censorship, bypass arbitrary web browser restrictions and
					innovate web proxy technologies.
				</p>
			</div>

			<form id="sj-form" class="flex-center">
				<input id="sj-search-engine" value="https://www.google.com/search?q=%s" type="hidden" />
				<input id="sj-address" type="text" placeholder="Search the web freely" autofocus />
			</form>

			<div class="desc left-margin">
				<p id="sj-error"></p>
				<pre id="sj-error-code"></pre>
			</div>
		</div>

		<iframe id="proxy-view" style="display:none;"></iframe>

		<footer>
			<div>
				<a title="The Mercury Workshop GitHub organization" href="https://github.com/MercuryWorkshop">Mercury Workshop</a>
				<a title="The example demo app for Scramjet" href="https://github.com/MercuryWorkshop/Scramjet-Demo">GitHub</a>
				<a title="License information" href="credits.html">Credits</a>
			</div>
			<div>
				<span>Scramjet &copy; MW 2025</span>
			</div>
		</footer>

		<script>
    // The main function that runs the search for BOTH boxes
    function launchProxy(val) {
        if (!val.trim()) return;
        
        let url = val.trim();
        // If it's not a URL, make it a Google search
        if (!url.includes('.') || url.includes(' ')) {
            url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
        } else if (!url.startsWith('http')) {
            url = 'https://' + url;
        }

        // Hide the "Chunky" home screen and show the sleek iframe
        document.getElementById('content-area').style.display = 'none';
        const frame = document.getElementById('proxy-view');
        frame.style.display = 'block';
        
        // Encode the URL and load it through your Scramjet service
        frame.src = '/service/' + btoa(url);
    }

    // Link the Top Bar search (Re-search)
    function navSearch() {
        const val = document.getElementById('nav-address').value;
        launchProxy(val);
    }

    // Link the Main Middle search (Fixes your broken box)
    document.getElementById('sj-form').onsubmit = function(e) {
        e.preventDefault();
        const val = document.getElementById('sj-address').value;
        launchProxy(val);
    };
</script>
	</body>
</html>
