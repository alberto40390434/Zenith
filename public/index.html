<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
		<title>Zenith</title>

		<link rel="icon" type="image/png" href="Zenith.png" />
	
		<script src="/scram/scramjet.all.js"></script>
		<script src="/baremux/index.js"></script>
		
		<link rel="stylesheet" href="index.css" />
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="index.js" defer></script>
	</head>

	<body>
    <nav class="navbar">
        <div class="nav-left" onclick="goHome()">
            <img src="Zenith.png" class="nav-logo">
            <span class="nav-title">ZENITH</span>
        </div>
        <div class="nav-center">
            <form onsubmit="event.preventDefault(); launchZenith(document.getElementById('nav-address').value);">
                <input id="nav-address" type="text" placeholder="Search with Zenith..." class="nav-input">
            </form>
        </div>
        <div class="nav-right">
            <button onclick="goHome()" class="nav-btn">üè† HOME</button>
            <button class="nav-btn">‚å®Ô∏è COMMANDS</button>
            <button class="nav-btn">‚öôÔ∏è SETTINGS</button>
        </div>
    </nav>

    <div id="content-area">
        <div class="flex-center logo-wrapper">
            <img class="logo" src="Zenith.png" alt="Zenith" />
            <h1>ZENITH | AC</h1>
        </div>
        <form id="sj-form" class="flex-center">
            <input id="sj-address" type="text" placeholder="Explore the web freely..." autofocus />
        </form>
    </div>

    <iframe id="proxy-view" style="display:none; width:100%; height:calc(100vh - 45px); border:none; background:white;"></iframe>

    <footer>
        <div><span>Zenith &copy; 2026</span></div>
    </footer>

    <script>
        function launchZenith(val) {
    if (!val.trim()) return;
    let url = val.trim();
    if (!url.includes('.') || url.includes(' ')) {
        url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
    } else if (!url.startsWith('http')) {
        url = 'https://' + url;
    }

    const mainContent = document.getElementById('content-area');
    const frame = document.getElementById('proxy-view');
    
    mainContent.style.display = 'none';
    frame.style.display = 'block';
    
    // The specific service path for your proxy
    frame.src = '/service/' + btoa(url);

    // This masks the Scramjet name if an error happens
    frame.onload = function() {
        try {
            if (frame.contentDocument.title.includes("Scramjet")) {
                frame.contentDocument.title = "Zenith | Error";
                // You can even force the text on the page to change
                let errorTitle = frame.contentDocument.querySelector('h1');
                if (errorTitle) errorTitle.innerText = "Zenith | Error";
            }
        } catch (e) {
            // Cross-origin might block editing the frame, 
            // but this helps catch internal routing errors.
        }
    };
}
        function goHome() {
            document.getElementById('content-area').style.display = 'flex';
            document.getElementById('proxy-view').style.display = 'none';
            document.getElementById('proxy-view').src = 'about:blank';
        }

        // Connect the middle search box
        document.getElementById('sj-form').onsubmit = function(e) {
            e.preventDefault();
            launchZenith(document.getElementById('sj-address').value);
        };
    </script>
</body>
</html>
