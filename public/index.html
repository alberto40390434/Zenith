<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
		<title>Zenith</title>

		<link rel="icon" type="image/png" href="Zenith.png" />
	
		<script src="/scram/scramjet.all.js"></script>
		<script src="/baremux/index.js"></script>
		
		<link rel="stylesheet" href="index.css" />
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="index.js" defer></script>
	</head>

	<body>
    <nav class="navbar">
        <div class="nav-left" onclick="goHome()">
            <img src="Zenith.png" class="nav-logo">
            <span class="nav-title">ZENITH</span>
        </div>
        <div class="nav-center">
            <form onsubmit="event.preventDefault(); launchZenith(document.getElementById('nav-address').value);">
                <input id="nav-address" type="text" placeholder="Search with Zenith..." class="nav-input">
            </form>
        </div>
        <div class="nav-right">
            <button onclick="goHome()" class="nav-btn">üè† HOME</button>
            <button class="nav-btn">‚å®Ô∏è COMMANDS</button>
            <button class="nav-btn">‚öôÔ∏è SETTINGS</button>
        </div>
    </nav>

    <div id="content-area">
        <div class="flex-center logo-wrapper">
            <img class="logo" src="Zenith.png" alt="Zenith" />
            <h1>ZENITH | AC</h1>
        </div>
        <form id="sj-form" class="flex-center">
            <input id="sj-address" type="text" placeholder="Explore the web freely..." autofocus />
        </form>
    </div>

    <iframe id="proxy-view" style="display:none; width:100%; height:calc(100vh - 45px); border:none; background:white;"></iframe>

    <footer>
        <div><span>Zenith &copy; 2026</span></div>
    </footer>

    <script>
        <script>
    <script>
  <script>
    // 1. The core function to launch a search
    function launchZenith(val) {
        if (!val || !val.trim()) return;
        let url = val.trim();
        
        // Turn keywords into a Google search link
        if (!url.includes('.') || url.includes(' ')) {
            url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
        } else if (!url.startsWith('http')) {
            url = 'https://' + url;
        }

        const mainContent = document.getElementById('content-area');
        const frame = document.getElementById('proxy-view');
        
        // Hide the Zenith landing page and show the web window
        if (mainContent) mainContent.style.display = 'none';
        if (frame) {
            frame.style.display = 'block';
            // Use btoa to encode the URL for Scramjet
            frame.src = '/service/' + btoa(url);
        }
    }

    // 2. Connect the Top "Re-search" Bar
    function navSearch() {
        const navInput = document.getElementById('nav-address');
        if (navInput) {
            launchZenith(navInput.value);
        }
    }

    // 3. Connect the Middle Search Box when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        const mainForm = document.getElementById('sj-form');
        if (mainForm) {
            mainForm.onsubmit = function(e) {
                e.preventDefault();
                const mainInput = document.getElementById('sj-address');
                if (mainInput) {
                    launchZenith(mainInput.value);
                }
            };
        }
    });

    // 4. Simple Home Reset
    function goHome() {
        window.location.reload();
    }
</script>
</body>
</html>
