<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
		/>
		<title>Zenith | AC</title>
		<link rel="shortcut icon" href="Zenith.png" />
	
		<script src="/scram/scramjet.all.js"></script>
		<script src="/baremux/index.js"></script>
		
		<link rel="stylesheet" href="index.css" />
		<script src="register-sw.js" defer></script>
		<script src="search.js" defer></script>
		<script src="index.js" defer></script>
		
		<style>
			/* Black background theme */
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
			
			body {
				background-color: #000 !important;
				color: white !important;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				padding: 40px 20px;
				overflow-x: hidden;
			}
			
			/* Make sure everything centers properly */
			.logo-wrapper {
				text-align: center;
				margin-bottom: 30px;
				width: 100%;
			}
			
			.logo-wrapper .logo {
				width: 150px;
				height: auto;
				display: block;
				margin: 0 auto 20px auto;
			}
			
			.logo-wrapper h1 {
				color: white;
				font-size: 3rem;
				letter-spacing: 5px;
				margin-top: 10px;
			}
			
			.desc {
				text-align: center;
				max-width: 600px;
				margin: 20px auto;
			}
			
			.desc p {
				color: #ccc;
				font-size: 14px;
				line-height: 1.6;
			}
			
			#sj-form {
				width: 100%;
				display: flex;
				justify-content: center;
				margin: 30px 0;
			}
			
			#sj-address {
				width: 500px;
				max-width: 90%;
				background: #0a0a0a;
				border: 1px solid #333;
				color: white;
				padding: 15px 25px;
				border-radius: 30px;
				font-size: 18px;
			}
			
			#sj-address:focus {
				border-color: #555;
				outline: none;
			}
			
			#sj-error, #sj-error-code {
				color: #ff6b6b;
				text-align: center;
			}
			
			footer {
				color: #666;
				text-align: center;
				margin-top: auto;
				padding: 20px;
				font-size: 12px;
			}
			
			footer a {
				color: #888;
				text-decoration: none;
			}
			
			footer a:hover {
				color: white;
			}
			
			/* Navbar styles */
			.zenith-navbar {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				height: 45px;
				background: #0a0a0a;
				display: none; /* Hidden by default, shown when browsing */
				align-items: center;
				justify-content: space-between;
				padding: 0 20px;
				border-bottom: 1px solid #1a1a1a;
				z-index: 10000; /* Higher than iframe */
			}
			
			.zenith-navbar.visible {
				display: flex;
			}
			
			.nav-left { 
				display: flex; 
				align-items: center; 
				cursor: pointer; 
			}
			
			.nav-logo { 
				height: 25px; 
				margin-right: 10px; 
			}
			
			.nav-title { 
				font-weight: bold; 
				letter-spacing: 1px;
				color: white;
			}
			
			.nav-center { 
				flex-grow: 1; 
				display: flex; 
				justify-content: center; 
			}
			
			.nav-input {
				width: 400px;
				background: #151515;
				border: 1px solid #333;
				color: white;
				padding: 5px 15px;
				border-radius: 20px;
				outline: none;
			}
			
			.nav-input:focus {
				border-color: #555;
			}
			
			.nav-btn {
				background: transparent;
				border: none;
				color: #888;
				margin-left: 15px;
				cursor: pointer;
				font-size: 12px;
			}
			
			.nav-btn:hover { 
				color: white; 
			}
			
			/* Hamburger menu */
			.nav-menu-btn {
				background: transparent;
				border: none;
				color: #888;
				cursor: pointer;
				font-size: 20px;
				padding: 5px 10px;
				margin-left: 10px;
			}
			
			.nav-menu-btn:hover {
				color: white;
			}
			
			.nav-menu-dropdown {
				position: absolute;
				top: 45px;
				right: 20px;
				background: #1a1a1a;
				border: 1px solid #333;
				border-radius: 8px;
				padding: 8px 0;
				min-width: 220px;
				display: none;
				z-index: 10001;
			}
			
			.nav-menu-dropdown.show {
				display: block;
			}
			
			.nav-menu-item {
				display: flex;
				align-items: center;
				padding: 12px 16px;
				color: #ccc;
				cursor: pointer;
				font-size: 14px;
				border: none;
				background: transparent;
				width: 100%;
				text-align: left;
			}
			
			.nav-menu-item:hover {
				background: #2a2a2a;
				color: white;
			}
			
			.nav-menu-item svg {
				margin-right: 12px;
				width: 18px;
				height: 18px;
			}
			
			.nav-menu-separator {
				height: 1px;
				background: #333;
				margin: 4px 0;
			}
			
			/* Light mode styles */
			body.light-mode {
				background-color: #f5f5f5 !important;
				color: #000 !important;
			}
			
			body.light-mode .zenith-navbar {
				background: #fff;
				border-bottom: 1px solid #e0e0e0;
			}
			
			body.light-mode .nav-title,
			body.light-mode .nav-btn,
			body.light-mode .nav-menu-btn {
				color: #333;
			}
			
			body.light-mode .nav-input {
				background: #f0f0f0;
				border-color: #ddd;
				color: #000;
			}
			
			body.light-mode #sj-address {
				background: #f0f0f0;
				border-color: #ddd;
				color: #000;
			}
			
			body.light-mode .desc p {
				color: #555;
			}
			
			body.light-mode .nav-menu-dropdown {
				background: #fff;
				border-color: #ddd;
			}
			
			body.light-mode .nav-menu-item {
				color: #333;
			}
			
			body.light-mode .nav-menu-item:hover {
				background: #f0f0f0;
			}
			
			/* Custom Inspect Element Modal */
			.inspect-modal {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0,0,0,0.8);
				display: none;
				z-index: 10002;
				align-items: center;
				justify-content: center;
			}
			
			.inspect-modal.show {
				display: flex;
			}
			
			.inspect-content {
				background: #1a1a1a;
				border: 1px solid #333;
				border-radius: 8px;
				width: 90%;
				height: 80%;
				display: flex;
				flex-direction: column;
			}
			
			.inspect-header {
				padding: 15px 20px;
				border-bottom: 1px solid #333;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}
			
			.inspect-header h3 {
				color: white;
				margin: 0;
			}
			
			.inspect-close {
				background: transparent;
				border: none;
				color: #888;
				font-size: 24px;
				cursor: pointer;
			}
			
			.inspect-close:hover {
				color: white;
			}
			
			.inspect-body {
				flex: 1;
				overflow: auto;
				padding: 20px;
			}
			
			.inspect-code {
				background: #0a0a0a;
				border: 1px solid #333;
				border-radius: 4px;
				padding: 15px;
				color: #0f0;
				font-family: 'Courier New', monospace;
				font-size: 12px;
				white-space: pre-wrap;
				overflow: auto;
				max-height: 100%;
			}
			
			/* Settings Modal */
			.settings-modal {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0,0,0,0.8);
				display: none;
				z-index: 10002;
				align-items: center;
				justify-content: center;
			}
			
			.settings-modal.show {
				display: flex;
			}
			
			.settings-content {
				background: #1a1a1a;
				border: 1px solid #333;
				border-radius: 8px;
				width: 600px;
				max-width: 90%;
				max-height: 80%;
				display: flex;
				flex-direction: column;
			}
			
			.settings-header {
				padding: 20px;
				border-bottom: 1px solid #333;
				display: flex;
				justify-content: space-between;
				align-items: center;
			}
			
			.settings-header h2 {
				color: white;
				margin: 0;
			}
			
			.settings-close {
				background: transparent;
				border: none;
				color: #888;
				font-size: 24px;
				cursor: pointer;
			}
			
			.settings-close:hover {
				color: white;
			}
			
			.settings-body {
				flex: 1;
				overflow: auto;
				padding: 20px;
			}
			
			.settings-section {
				margin-bottom: 30px;
			}
			
			.settings-section h3 {
				color: white;
				font-size: 16px;
				margin-bottom: 15px;
			}
			
			.settings-option {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 12px 0;
				border-bottom: 1px solid #2a2a2a;
			}
			
			.settings-option:last-child {
				border-bottom: none;
			}
			
			.settings-label {
				color: #ccc;
				font-size: 14px;
			}
			
			.settings-toggle {
				width: 50px;
				height: 26px;
				background: #333;
				border-radius: 13px;
				position: relative;
				cursor: pointer;
				transition: background 0.3s;
			}
			
			.settings-toggle.active {
				background: #4CAF50;
			}
			
			.settings-toggle-slider {
				width: 22px;
				height: 22px;
				background: white;
				border-radius: 50%;
				position: absolute;
				top: 2px;
				left: 2px;
				transition: left 0.3s;
			}
			
			.settings-toggle.active .settings-toggle-slider {
				left: 26px;
			}
			
			.settings-input {
				background: #0a0a0a;
				border: 1px solid #333;
				border-radius: 4px;
				padding: 8px 12px;
				color: white;
				font-size: 14px;
				width: 200px;
			}
			
			/* Adjust iframe when navbar is visible */
			#sj-frame {
				position: fixed !important;
				top: 0 !important;
				left: 0 !important;
				width: 100% !important;
				height: 100vh !important;
				border: none !important;
				z-index: 9000 !important; /* Below navbar */
			}
			
			body.browsing #sj-frame {
				top: 45px !important;
				height: calc(100vh - 45px) !important;
			}
		</style>
	</head>
	<body>
		<!-- Navbar (hidden by default, shows when browsing) -->
		<nav class="zenith-navbar" id="zenith-navbar">
			<div class="nav-left" onclick="window.zenithGoHome()">
				<img src="Zenith.png" class="nav-logo" alt="Zenith">
				<span class="nav-title">ZENITH</span>
			</div>
			<div class="nav-center">
				<form id="nav-form" onsubmit="return window.zenithNavSearch(event)">
					<input id="nav-address" type="text" placeholder="Search with Zenith..." class="nav-input">
				</form>
			</div>
			<div class="nav-right">
				<button onclick="window.zenithGoHome()" class="nav-btn" type="button">üè† HOME</button>
				<button onclick="window.toggleNavMenu()" class="nav-menu-btn" type="button">‚ò∞</button>
			</div>
			
			<!-- Dropdown menu -->
			<div id="nav-menu-dropdown" class="nav-menu-dropdown">
				<button class="nav-menu-item" onclick="window.openNewTab()">
					<span>‚ûï New tab (Ctrl+Alt+N)</span>
				</button>
				<button class="nav-menu-item" onclick="window.toggleFullscreen()">
					<span>‚õ∂ Full Screen (Ctrl+Alt+Z)</span>
				</button>
				<button class="nav-menu-item" onclick="window.reloadPage()">
					<span>‚Üª Reload (Ctrl+Alt+R)</span>
				</button>
				<button class="nav-menu-item" onclick="window.inspectElement()">
					<span>‚öô Inspect Element (Ctrl+Alt+I)</span>
				</button>
				<div class="nav-menu-separator"></div>
				<button class="nav-menu-item" onclick="window.toggleDarkMode()">
					<span>üåô Dark Mode (Ctrl+Alt+X)</span>
				</button>
				<button class="nav-menu-item" onclick="window.toggleAboutBlank()">
					<span>üîí AB Cloak (Ctrl+Alt+C)</span>
				</button>
				<button class="nav-menu-item" onclick="window.panicMode()">
					<span>‚ö† Panic ()</span>
				</button>
				<div class="nav-menu-separator"></div>
				<button class="nav-menu-item" onclick="window.openSettings()">
					<span>‚öô Settings (Ctrl+.)</span>
				</button>
			</div>
		</nav>
	
		<div style="width: 100%; max-width: 800px; margin: auto;">
			<div class="logo-wrapper">
				<img class="logo" src="Zenith.png" alt="Zenith" />
				<h1>ZENITH | AC</h1>
			</div>
			<div class="desc">
				<p>
					Scramjet is an experimental interception based web proxy designed to
					evade internet censorship, bypass arbitrary web browser restrictions and
					innovate web proxy technologies.
				</p>
			</div>
			<form id="sj-form">
				<input
					id="sj-search-engine"
					value="https://www.google.com/search?q=%s"
					type="hidden"
				/>
				<input id="sj-address" type="text" placeholder="Explore the web freely..." />
			</form>
			<div class="desc">
				<p id="sj-error"></p>
				<pre id="sj-error-code"></pre>
			</div>
		</div>
		
		<!-- Custom Inspect Element Modal -->
		<div id="inspect-modal" class="inspect-modal">
			<div class="inspect-content">
				<div class="inspect-header">
					<h3>üîç Inspect Element</h3>
					<button class="inspect-close" onclick="window.closeInspect()">√ó</button>
				</div>
				<div class="inspect-body">
					<div class="inspect-code" id="inspect-code">Loading...</div>
				</div>
			</div>
		</div>
		
		<!-- Settings Modal -->
		<div id="settings-modal" class="settings-modal">
			<div class="settings-content">
				<div class="settings-header">
					<h2>‚öôÔ∏è Settings</h2>
					<button class="settings-close" onclick="window.closeSettings()">√ó</button>
				</div>
				<div class="settings-body">
					<div class="settings-section">
						<h3>Appearance</h3>
						<div class="settings-option">
							<span class="settings-label">Dark Mode</span>
							<div class="settings-toggle active" id="dark-mode-toggle" onclick="window.toggleDarkMode()">
								<div class="settings-toggle-slider"></div>
							</div>
						</div>
					</div>
					
					<div class="settings-section">
						<h3>Search Engine</h3>
						<div class="settings-option">
							<span class="settings-label">Default Search</span>
							<select class="settings-input" id="search-engine-select">
								<option value="https://www.google.com/search?q=%s">Google</option>
								<option value="https://www.bing.com/search?q=%s">Bing</option>
								<option value="https://duckduckgo.com/?q=%s">DuckDuckGo</option>
								<option value="https://search.brave.com/search?q=%s">Brave</option>
							</select>
						</div>
					</div>
					
					<div class="settings-section">
						<h3>Privacy</h3>
						<div class="settings-option">
							<span class="settings-label">About:Blank Cloaking</span>
							<div class="settings-toggle" id="ab-cloak-toggle" onclick="window.toggleAbCloak()">
								<div class="settings-toggle-slider"></div>
							</div>
						</div>
						<div class="settings-option">
							<span class="settings-label">Panic URL</span>
							<input type="text" class="settings-input" id="panic-url" value="https://www.google.com" placeholder="https://...">
						</div>
					</div>
					
					<div class="settings-section">
						<h3>Advanced</h3>
						<div class="settings-option">
							<span class="settings-label">Custom Tab Title</span>
							<input type="text" class="settings-input" id="tab-title" placeholder="Zenith | AC">
						</div>
						<div class="settings-option">
							<span class="settings-label">Custom Favicon URL</span>
							<input type="text" class="settings-input" id="favicon-url" placeholder="https://...">
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<footer>
			<div>
				<span>Zenith &copy; 2026</span>
			</div>
		</footer>
		
		<script>
			// Navbar functionality - doesn't interfere with Scramjet
			window.zenithNavSearch = function(event) {
				event.preventDefault();
				const navInput = document.getElementById('nav-address');
				const mainInput = document.getElementById('sj-address');
				if (navInput.value && mainInput) {
					mainInput.value = navInput.value;
					document.getElementById('sj-form').dispatchEvent(new Event('submit', { bubbles: true, cancelable: true }));
				}
				return false;
			};
			
			window.zenithGoHome = function() {
				location.reload();
			};
			
			// Toggle hamburger menu
			window.toggleNavMenu = function() {
				const dropdown = document.getElementById('nav-menu-dropdown');
				dropdown.classList.toggle('show');
			};
			
			// Close menu when clicking outside
			document.addEventListener('click', function(event) {
				const dropdown = document.getElementById('nav-menu-dropdown');
				const menuBtn = event.target.closest('.nav-menu-btn');
				if (!menuBtn && !event.target.closest('.nav-menu-dropdown')) {
					dropdown.classList.remove('show');
				}
			});
			
			// Menu functions (basic implementations)
			window.openNewTab = function() {
				window.open(window.location.href, '_blank');
			};
			
			window.toggleFullscreen = function() {
				if (!document.fullscreenElement) {
					document.documentElement.requestFullscreen();
				} else {
					document.exitFullscreen();
				}
			};
			
			window.reloadPage = function() {
				const frame = document.getElementById('sj-frame');
				if (frame && frame.src) {
					frame.src = frame.src;
				}
			};
			
			// Custom Inspect Element
			window.inspectElement = function() {
				const modal = document.getElementById('inspect-modal');
				const codeEl = document.getElementById('inspect-code');
				const frame = document.getElementById('sj-frame');
				
				if (frame && frame.contentWindow) {
					try {
						const html = frame.contentWindow.document.documentElement.outerHTML;
						codeEl.textContent = html;
					} catch(e) {
						codeEl.textContent = 'Cannot inspect: Cross-origin frame\n\nError: ' + e.message;
					}
				} else {
					codeEl.textContent = '<!-- No page loaded -->';
				}
				
				modal.classList.add('show');
			};
			
			window.closeInspect = function() {
				document.getElementById('inspect-modal').classList.remove('show');
			};
			
			// Dark/Light Mode Toggle
			window.toggleDarkMode = function() {
				const body = document.body;
				const toggle = document.getElementById('dark-mode-toggle');
				
				body.classList.toggle('light-mode');
				toggle.classList.toggle('active');
				
				// Save preference
				localStorage.setItem('zenith-theme', body.classList.contains('light-mode') ? 'light' : 'dark');
			};
			
			// Load saved theme on startup
			window.addEventListener('load', function() {
				const savedTheme = localStorage.getItem('zenith-theme');
				if (savedTheme === 'light') {
					document.body.classList.add('light-mode');
					const toggle = document.getElementById('dark-mode-toggle');
					if (toggle) toggle.classList.remove('active');
				}
			});
			
			// About:Blank Cloaking
			let abCloakEnabled = localStorage.getItem('ab-cloak') === 'true';
			
			window.toggleAbCloak = function() {
				abCloakEnabled = !abCloakEnabled;
				localStorage.setItem('ab-cloak', abCloakEnabled);
				const toggle = document.getElementById('ab-cloak-toggle');
				if (toggle) {
					toggle.classList.toggle('active', abCloakEnabled);
				}
				
				if (abCloakEnabled) {
					window.toggleAboutBlank();
				}
			};
			
			window.toggleAboutBlank = function() {
				const win = window.open();
				win.document.body.innerHTML = `<iframe src="${window.location.href}" style="position:fixed;top:0;left:0;width:100%;height:100%;border:none;"></iframe>`;
				window.close();
			};
			
			window.panicMode = function() {
				const panicUrl = document.getElementById('panic-url')?.value || 'https://www.google.com';
				window.location.href = panicUrl;
			};
			
			// Settings Modal
			window.openSettings = function() {
				const modal = document.getElementById('settings-modal');
				modal.classList.add('show');
				
				// Load saved settings
				const searchEngine = localStorage.getItem('search-engine') || 'https://www.google.com/search?q=%s';
				const panicUrl = localStorage.getItem('panic-url') || 'https://www.google.com';
				const tabTitle = localStorage.getItem('tab-title') || '';
				const faviconUrl = localStorage.getItem('favicon-url') || '';
				
				document.getElementById('search-engine-select').value = searchEngine;
				document.getElementById('panic-url').value = panicUrl;
				document.getElementById('tab-title').value = tabTitle;
				document.getElementById('favicon-url').value = faviconUrl;
				
				const abToggle = document.getElementById('ab-cloak-toggle');
				if (abToggle) {
					abToggle.classList.toggle('active', abCloakEnabled);
				}
			};
			
			window.closeSettings = function() {
				document.getElementById('settings-modal').classList.remove('show');
				
				// Save settings
				localStorage.setItem('search-engine', document.getElementById('search-engine-select').value);
				localStorage.setItem('panic-url', document.getElementById('panic-url').value);
				localStorage.setItem('tab-title', document.getElementById('tab-title').value);
				localStorage.setItem('favicon-url', document.getElementById('favicon-url').value);
				
				// Apply settings
				const tabTitle = document.getElementById('tab-title').value;
				if (tabTitle) document.title = tabTitle;
				
				const faviconUrl = document.getElementById('favicon-url').value;
				if (faviconUrl) {
					const link = document.querySelector("link[rel*='icon']") || document.createElement('link');
					link.type = 'image/x-icon';
					link.rel = 'shortcut icon';
					link.href = faviconUrl;
					document.getElementsByTagName('head')[0].appendChild(link);
				}
				
				// Update search engine
				const searchEngine = document.getElementById('search-engine-select').value;
				const searchInput = document.getElementById('sj-search-engine');
				if (searchInput) searchInput.value = searchEngine;
			};
			
			// Show navbar when iframe becomes visible, hide home content
			function updateUIState() {
				const frame = document.getElementById('sj-frame');
				const navbar = document.getElementById('zenith-navbar');
				const homeContent = document.querySelector('body > div[style*="max-width"]');
				const footer = document.querySelector('footer');
				
				if (frame && navbar) {
					// Check if iframe is visible and has content
					const isBrowsing = frame.style.display === 'block' || (frame.style.display !== 'none' && frame.src);
					
					if (isBrowsing) {
						// Browsing mode: show navbar, hide home content
						navbar.classList.add('visible');
						navbar.style.display = 'flex';
						document.body.classList.add('browsing');
						if (homeContent) homeContent.style.display = 'none';
						if (footer) footer.style.display = 'none';
						console.log('Navbar shown - browsing mode');
					} else {
						// Home mode: hide navbar, show home content
						navbar.classList.remove('visible');
						navbar.style.display = 'none';
						document.body.classList.remove('browsing');
						if (homeContent) homeContent.style.display = 'block';
						if (footer) footer.style.display = 'block';
						console.log('Navbar hidden - home mode');
					}
				}
			}
			
			const observer = new MutationObserver(updateUIState);
			
			// Start observing once the iframe exists
			window.addEventListener('load', () => {
				const frame = document.getElementById('sj-frame');
				if (frame) {
					observer.observe(frame, { attributes: true, attributeFilter: ['style', 'src'] });
					// Also check immediately
					updateUIState();
				}
				
				// Check periodically in case the mutation observer misses something
				setInterval(updateUIState, 500);
			});
		</script>
	</body>
</html>
